{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "timeline",
  "type": "registry:ui",
  "title": "Timeline component",
  "description": "A timeline component",
  "files": [
    {
      "path": "registry/8starlabs-ui/blocks/timeline.tsx",
      "content": "\"use client\";\n\nimport {\n  Children,\n  cloneElement,\n  createContext,\n  CSSProperties,\n  HTMLAttributes,\n  ReactElement,\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState\n} from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { cva, VariantProps } from \"class-variance-authority\";\n\n// CSS VARIANTS\n\n// Dot in the center of the timeline item\nconst timelineDotVariants = cva(\n  \"relative h-4 w-4 rounded-full z-10 flex items-center justify-center\",\n  {\n    variants: {\n      variant: {\n        default: \"border-primary\",\n        secondary: \"border-secondary\",\n        destructive: \"border-destructive\",\n        outline: \"\"\n      },\n      hollow: {\n        true: \"border-2 bg-card\",\n        false: \"border-2\"\n      }\n    },\n    compoundVariants: [\n      {\n        hollow: false,\n        variant: \"default\",\n        class: \"bg-primary\"\n      },\n      {\n        hollow: false,\n        variant: \"secondary\",\n        class: \"bg-secondary\"\n      },\n      {\n        hollow: false,\n        variant: \"destructive\",\n        class: \"bg-destructive\"\n      },\n      {\n        hollow: false,\n        variant: \"outline\",\n        class: \"bg-background\"\n      }\n    ],\n    defaultVariants: {\n      variant: \"default\",\n      hollow: false\n    }\n  }\n);\n\n// Card container\nconst timelineItemVariants = cva(\n  \"flex flex-col rounded-md transition-all p-4 shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-card border text-card-foreground shadow-sm\",\n        secondary: \"bg-secondary text-secondary-foreground shadow-sm\",\n        destructive:\n          \"bg-destructive/10 border border-destructive/20 text-destructive-foreground shadow-sm\",\n        outline: \"bg-transparent border shadow-sm\"\n      },\n      noCards: {\n        true: \"border-none shadow-none bg-transparent\",\n        false: \"\"\n      }\n    },\n    defaultVariants: {\n      variant: \"default\",\n      noCards: false\n    }\n  }\n);\n\n// Branch connecting dot to card\nconst timelineBranchVariants = cva(\"absolute z-0\", {\n  variants: {\n    variant: {\n      default: \"bg-primary\",\n      secondary: \"bg-secondary\",\n      destructive: \"bg-destructive\",\n      outline: \"bg-border\"\n    }\n  },\n  defaultVariants: {\n    variant: \"default\"\n  }\n});\n\n// Timeline layout container\nconst timelineLayoutVariants = cva(\"grid relative\", {\n  variants: {\n    orientation: {\n      horizontal: \"grid-flow-col grid-rows-[min-content_2rem_min-content]\",\n      vertical: \"grid-cols-[1fr_2rem_1fr] auto-rows-min\"\n    }\n  },\n  defaultVariants: {\n    orientation: \"horizontal\"\n  }\n});\n\n// Timeline item container (card + dot + line + branch)\nconst timelineItemContainerVariants = cva(\"flex relative snap-center\", {\n  variants: {\n    orientation: {\n      horizontal: \"w-full justify-center\",\n      vertical: \"h-full items-center\"\n    },\n    side: {\n      before: \"\",\n      after: \"\"\n    }\n  },\n  compoundVariants: [\n    { orientation: \"horizontal\", side: \"before\", class: \"items-end\" },\n    { orientation: \"horizontal\", side: \"after\", class: \"items-start\" },\n    { orientation: \"vertical\", side: \"before\", class: \"justify-end\" },\n    { orientation: \"vertical\", side: \"after\", class: \"justify-start\" }\n  ]\n});\n\n// EXPORTED INTERFACES AND COMPONENTS\nexport interface TimelineItemProps\n  extends\n    HTMLAttributes<HTMLLIElement>,\n    VariantProps<typeof timelineItemVariants> {\n  hollow?: boolean;\n}\n\ntype _timelineItemProps = TimelineItemProps & {\n  index?: number | null;\n};\n\nexport interface TimelineProps\n  extends\n    HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof timelineLayoutVariants> {\n  children?: React.ReactNode;\n\n  alternating?: boolean;\n  alignment?: \"top/left\" | \"bottom/right\";\n\n  horizItemSpacing?: number;\n  horizItemWidth?: number;\n\n  vertItemSpacing?: number;\n  vertItemMaxWidth?: number;\n\n  orientation?: \"horizontal\" | \"vertical\";\n\n  noCards?: boolean;\n}\n\nexport interface TimelineItemDateProps extends Omit<\n  HTMLAttributes<HTMLSpanElement>,\n  \"children\"\n> {\n  children: Date | string;\n}\n\nexport interface TimelineItemTitleProps extends HTMLAttributes<HTMLHeadingElement> {\n  children: React.ReactNode;\n}\n\nexport interface TimelineItemDescriptionProps extends HTMLAttributes<HTMLParagraphElement> {\n  children: React.ReactNode;\n}\n\ntype TimelineContextType = {\n  orientation: \"horizontal\" | \"vertical\";\n  total: number;\n  cardWidth: number;\n  maxCardWidth: number;\n  alternating: boolean;\n  alignment: \"top/left\" | \"bottom/right\";\n  noCards: boolean;\n};\n\nconst TlCtxt = createContext<TimelineContextType | null>(null);\n\nfunction useTimelineContext() {\n  const context = useContext(TlCtxt);\n  if (context === null) {\n    throw new Error(\n      \"Timeline components must be used within a Timeline component.\"\n    );\n  }\n  return context;\n}\n\nexport default function Timeline({\n  children,\n  className,\n  horizItemWidth = 220,\n  horizItemSpacing = 130,\n  vertItemSpacing = 130,\n  vertItemMaxWidth = 350,\n  alternating = true,\n  alignment = \"top/left\",\n  orientation = \"horizontal\",\n  noCards = false,\n  ...props\n}: TimelineProps) {\n  const isVertical = orientation === \"vertical\";\n\n  const safePadding = Math.max(0, (horizItemWidth - horizItemSpacing) / 2);\n\n  const [verticalPadding, setVerticalPadding] = useState({ top: 0, bottom: 0 });\n  const listRef = useRef<HTMLUListElement>(null);\n\n  useLayoutEffect(() => {\n    if (!isVertical || !listRef.current) {\n      setVerticalPadding({ top: 0, bottom: 0 });\n      return;\n    }\n\n    const computePadding = () => {\n      const list = listRef.current;\n      if (!list) return;\n\n      // Find all cards\n      const cards = list.querySelectorAll('[data-timeline-card=\"true\"]');\n      if (cards.length === 0) return;\n\n      const firstCard = cards[0];\n      const lastCard = cards[cards.length - 1];\n\n      // Calculate heights\n      const firstHeight = firstCard.getBoundingClientRect().height;\n      const lastHeight = lastCard.getBoundingClientRect().height;\n\n      // Formula: (CardHeight - Spacing) / 2\n      // We use Math.max(0, ...) because if the card is smaller than spacing,\n      // we don't want negative padding.\n      const top = Math.max(0, (firstHeight - vertItemSpacing) / 2);\n      const bottom = Math.max(0, (lastHeight - vertItemSpacing) / 2);\n\n      setVerticalPadding({ top, bottom });\n    };\n\n    // Run initially\n    computePadding();\n\n    // Re-run if window resizes (content wrapping changes height)\n    const observer = new ResizeObserver(() => computePadding());\n    observer.observe(listRef.current);\n\n    return () => observer.disconnect();\n  }, [isVertical, vertItemSpacing, children]);\n\n  const contextVal: TimelineContextType = {\n    orientation,\n    total: Children.count(children),\n    cardWidth: horizItemWidth,\n    maxCardWidth: vertItemMaxWidth,\n    alternating,\n    alignment,\n    noCards\n  };\n\n  return (\n    <div\n      id=\"timeline-container\"\n      className={cn(\n        \"flex h-full w-full p-4\",\n        isVertical ? \"flex-col\" : \"flex-row\",\n        className\n      )}\n      role=\"list\"\n      aria-orientation={orientation}\n      aria-label=\"Timeline\"\n      {...props}\n    >\n      <ul\n        id=\"timeline-grid\"\n        className={timelineLayoutVariants({ orientation })}\n        style={\n          isVertical\n            ? {\n                gridAutoRows: `${vertItemSpacing}px`,\n                // DYNAMIC GRID COLUMNS\n                gridTemplateColumns: alternating\n                  ? \"1fr 2rem 1fr\" // Standard centered\n                  : alignment === \"top/left\" // \"Content Left\"\n                    ? \"1fr 2rem\" // remove right column\n                    : \"2rem 1fr\", // remove left column (Line First)\n                paddingTop: `${verticalPadding.top}px`,\n                paddingBottom: `${verticalPadding.bottom}px`\n              }\n            : {\n                gridAutoColumns: `${horizItemSpacing}px`,\n                // DYNAMIC GRID ROWS\n                gridTemplateRows: alternating\n                  ? \"min-content 2rem min-content\"\n                  : alignment === \"top/left\" // \"Content Top\"\n                    ? \"min-content 2rem\"\n                    : \"2rem min-content\",\n                paddingLeft: `${safePadding}px`,\n                paddingRight: `${safePadding}px`\n              }\n        }\n        ref={listRef}\n      >\n        <TlCtxt.Provider value={contextVal}>\n          {Children.map(children, (child, index) =>\n            cloneElement(child as ReactElement<any>, { index })\n          )}\n        </TlCtxt.Provider>\n      </ul>\n    </div>\n  );\n}\n\nfunction getGridAndLineStyles(\n  side: \"before\" | \"after\",\n  index: number,\n  isVertical: boolean,\n  alternating: boolean\n): { gridStyle: CSSProperties; lineStyle: CSSProperties } {\n  let gridStyle: CSSProperties = {};\n  let lineStyle: CSSProperties = {};\n\n  if (isVertical) {\n    // VERTICAL LOGIC\n    if (alternating) {\n      // 3 Columns: [Content] [Line] [Content]\n      gridStyle = { gridColumn: side === \"before\" ? 1 : 3, gridRow: index + 1 };\n      lineStyle = { gridColumn: 2, gridRow: index + 1, height: \"100%\" };\n    } else {\n      // 2 Columns\n      if (side === \"before\") {\n        // [Content] [Line]\n        gridStyle = { gridColumn: 1, gridRow: index + 1 };\n        lineStyle = { gridColumn: 2, gridRow: index + 1, height: \"100%\" };\n      } else {\n        // [Line] [Content]\n        gridStyle = { gridColumn: 2, gridRow: index + 1 };\n        lineStyle = { gridColumn: 1, gridRow: index + 1, height: \"100%\" };\n      }\n    }\n  } else {\n    // HORIZONTAL LOGIC\n    if (alternating) {\n      // 3 Rows: [Content] [Line] [Content]\n      gridStyle = { gridColumn: index + 1, gridRow: side === \"before\" ? 1 : 3 };\n      lineStyle = { gridColumn: index + 1, gridRow: 2, width: \"100%\" };\n    } else {\n      // 2 Rows\n      if (side === \"before\") {\n        // [Content]\n        // [Line]\n        gridStyle = { gridColumn: index + 1, gridRow: 1 };\n        lineStyle = { gridColumn: index + 1, gridRow: 2, width: \"100%\" };\n      } else {\n        // [Line]\n        // [Content]\n        gridStyle = { gridColumn: index + 1, gridRow: 2 };\n        lineStyle = { gridColumn: index + 1, gridRow: 1, width: \"100%\" };\n      }\n    }\n  }\n\n  return { gridStyle, lineStyle };\n}\n\nfunction getCardStyle(\n  isVertical: boolean,\n  cardWidth: number,\n  maxCardWidth: number\n): CSSProperties {\n  return isVertical\n    ? {\n        maxWidth: `${maxCardWidth}px`\n      }\n    : {\n        width: `${cardWidth}px`,\n        minWidth: `${cardWidth}px`,\n        maxWidth: `${cardWidth}px`\n      };\n}\n\nfunction getBranchStyle(\n  isVertical: boolean,\n  isEven: boolean,\n  alternating: boolean,\n  alignment: \"top/left\" | \"bottom/right\"\n): string {\n  return isVertical\n    ? alternating\n      ? isEven\n        ? \"h-px w-4 left-0\"\n        : \"h-px w-4 right-0\"\n      : alignment === \"top/left\"\n        ? \"h-px w-4 left-0\"\n        : \"h-px w-4 right-0\"\n    : alternating\n      ? isEven\n        ? \"w-px h-4 top-0\"\n        : \"w-px h-4 bottom-0\"\n      : alignment === \"top/left\"\n        ? \"w-px h-4 top-0\"\n        : \"w-px h-4 bottom-0\";\n}\n\nexport function TimelineItem({\n  children,\n  className,\n  variant,\n  hollow = false,\n  index = null,\n  ...props\n}: _timelineItemProps) {\n  if (index == null) {\n    throw new Error(\"TimelineItem must be used as a direct child of Timeline.\");\n  }\n\n  const {\n    orientation,\n    total,\n    cardWidth,\n    maxCardWidth,\n    alternating,\n    alignment,\n    noCards\n  } = useTimelineContext();\n\n  const isEven = index % 2 === 0;\n  const isVertical = orientation === \"vertical\";\n\n  // Determine \"side\" based on index\n  const side = alternating\n    ? isEven\n      ? \"before\"\n      : \"after\"\n    : alignment === \"top/left\"\n      ? \"before\"\n      : \"after\";\n\n  const { gridStyle, lineStyle } = getGridAndLineStyles(\n    side,\n    index,\n    isVertical,\n    alternating\n  );\n\n  return (\n    <>\n      <li\n        id={`timeline-item-${index}-container`}\n        className={cn(timelineItemContainerVariants({ orientation, side }))}\n        style={gridStyle}\n        role=\"listitem\"\n        aria-posinset={index + 1}\n        aria-setsize={total}\n        {...props}\n      >\n        <div\n          id={`timeline-item-${index}`}\n          style={getCardStyle(isVertical, cardWidth, maxCardWidth)}\n          className={cn(timelineItemVariants({ variant, noCards }), className)}\n          data-timeline-card={true}\n        >\n          {children}\n        </div>\n      </li>\n\n      <li\n        id={`timeline-item-${index}-middle`}\n        className=\"relative flex items-center justify-center\"\n        style={lineStyle}\n      >\n        <div\n          className={cn(\n            \"absolute bg-muted\",\n            index === 0\n              ? isVertical\n                ? \"rounded-t-full\"\n                : \"rounded-l-full\"\n              : \"\",\n            index === total - 1\n              ? isVertical\n                ? \"rounded-b-full\"\n                : \"rounded-r-full\"\n              : \"\",\n            isVertical ? \"h-full w-1\" : \"w-full h-1\"\n          )}\n          id={`timeline-item-${index}-line`}\n          aria-hidden=\"true\"\n        />\n\n        <div\n          className={cn(\n            timelineBranchVariants({ variant }),\n            getBranchStyle(isVertical, isEven, alternating, alignment)\n          )}\n          id={`timeline-item-${index}-branch`}\n          aria-hidden=\"true\"\n        />\n\n        <div\n          className={cn(timelineDotVariants({ variant, hollow }))}\n          id={`timeline-item-${index}-dot`}\n          aria-hidden=\"true\"\n        />\n      </li>\n    </>\n  );\n}\n\nexport function TimelineItemDate({\n  children,\n  className,\n  ...props\n}: TimelineItemDateProps) {\n  return (\n    <span\n      className={cn(\"text-xs text-muted-foreground mb-1\", className)}\n      {...props}\n    >\n      {children instanceof Date ? (\n        <time dateTime={children.toISOString()}>\n          {dateFormatter.format(children)}\n        </time>\n      ) : (\n        children\n      )}\n    </span>\n  );\n}\n\nexport function TimelineItemTitle({\n  children,\n  className,\n  ...props\n}: TimelineItemTitleProps) {\n  return (\n    <h3 className={cn(\"font-semibold\", className)} {...props}>\n      {children}\n    </h3>\n  );\n}\n\nexport function TimelineItemDescription({\n  children,\n  className,\n  ...props\n}: TimelineItemDescriptionProps) {\n  return (\n    <p\n      className={cn(\"text-sm text-muted-foreground mt-2\", className)}\n      {...props}\n    >\n      {children}\n    </p>\n  );\n}\n\nconst dateFormatter = new Intl.DateTimeFormat(\"en-US\", {\n  day: \"numeric\",\n  month: \"short\",\n  year: \"numeric\"\n});\n",
      "type": "registry:ui"
    }
  ]
}
